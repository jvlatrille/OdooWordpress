<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>

    <!-- LISTE -->
    <record id="view_cyberware_client_list" model="ir.ui.view">
      <field name="name">cyberware.client.list</field>
      <field name="model">cyberware.client</field>
      <field name="arch" type="xml">
        <list string="Clients">
          <field name="nom_client" />
          <field name="pseudo" />
          <field name="age" />
          <field name="essence_restante" />
        </list>
      </field>
    </record>

    <!-- FORMULAIRE -->
    <record id="view_cyberware_client_form" model="ir.ui.view">
      <field name="name">cyberware.client.form</field>
      <field name="model">cyberware.client</field>
      <field name="arch" type="xml">
        <form string="Client">
          <header>
            <button name="action_controler_donnees"
              string="Vérifier le dossier"
              type="object"
              class="oe_highlight" />
          </header>
          <sheet>
            <group>
              <field name="nom_client" />
              <field name="pseudo" />
              <field name="date_naissance" />
              <field name="image_client" />
              <field name="niveau_essence_max" />
            </group>

            <group string="Données Médicales">
              <field name="groupe_sanguin" />
              <field name="email_user" />
            </group>

            <group string="Statistiques">
              <field name="age" readonly="1" />
              <field name="essence_utilisee" readonly="1" />
              <field name="essence_restante" readonly="1" />
            </group>

            <notebook>
              <page string="Implants installés">
                <field name="implant_ids" widget="many2many_tags" />
              </page>
              <page string="Historique implantations">
                <field name="implantation_ids" />
              </page>
            </notebook>

          </sheet>
        </form>
      </field>
    </record>

    <record id="view_cyberware_client_kanban" model="ir.ui.view">
      <field name="name">cyberware.client.kanban</field>
      <field name="model">cyberware.client</field>
      <field name="arch" type="xml">
        <kanban>
          <field name="id" />
          <field name="nom_client" />
          <field name="image_client" />
          <field name="pseudo" />
          <field name="essence_restante" />
          <field name="age" />

          <templates>
            <t t-name="card">
              <div class="oe_kanban_global_click">
                <div class="o_kanban_image">
                  <img
                    t-attf-src="/web/image?model=cyberware.client&amp;id=#{record.id.raw_value}&amp;field=image_client"
                    class="o_kanban_image_fill_left o_kanban_image_full" 
                    style="width: 85px; height: 85px; object-fit: cover;"
                    alt="Avatar" />
                </div>

                <div class="oe_kanban_details">
                  <strong class="o_kanban_record_title">
                    <field name="nom_client" />
                  </strong>

                  <div t-if="record.pseudo.value">
                    <i class="fa fa-user-secret" title="Alias"></i>
                    <field name="pseudo" />
                  </div>

                  <div> Âge : <field name="age" /> ans </div>

                  <div> Essence : <span
                      t-att-class="record.essence_restante.raw_value &lt; 20 ? 'text-danger fw-bold' : 'text-success'">
                      <field name="essence_restante" />
                    </span>
                  </div>
                </div>
              </div>
            </t>
          </templates>
        </kanban>
      </field>
    </record>
  </data>
</odoo>